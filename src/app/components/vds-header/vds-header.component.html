<!-- File: src/app/components/vds-header/vds-header.component.html -->
<ion-header [class.hero-variant]="variant === 'hero'">
  <ion-toolbar>
    <!-- Mobile: hamburger -->
    <ion-buttons slot="start" class="mobile-only">
      <ion-menu-button autoHide="false"></ion-menu-button>
    </ion-buttons>

    <ion-title class="brand">
      <a routerLink="/home-v2" class="brand-link">
        <span class="mono">BEYOND</span> HORIZON
      </a>
    </ion-title>

    <!-- Desktop: nav buttons -->
    <ion-buttons slot="end" class="desktop-only nav">
      <ion-button routerLink="/">Home</ion-button>

      <ion-button
        class="dropdown-trigger"
        (mouseenter)="openDropdown('guide', $event)"
        (mouseleave)="closeDropdown()"
      >
        Guide <span class="arrow">▼</span>
      </ion-button>

      <ion-button
        class="dropdown-trigger"
        (mouseenter)="openDropdown('fleet', $event)"
        (mouseleave)="closeDropdown()"
      >
        Fleet <span class="arrow">▼</span>
      </ion-button>

      <ion-button
        class="dropdown-trigger"
        (mouseenter)="openDropdown('codex', $event)"
        (mouseleave)="closeDropdown()"
      >
        Codex <span class="arrow">▼</span>
      </ion-button>

      <ion-button
        class="dropdown-trigger"
        (mouseenter)="openDropdown('community', $event)"
        (mouseleave)="closeDropdown()"
      >
        Community <span class="arrow">▼</span>
      </ion-button>

      <ion-button routerLink="/login" class="login-button">Login</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Fixed-position dropdowns (won't be clipped by header) -->
@if (activeDropdown() === 'guide') {
  <div
    class="dropdown-menu"
    [ngStyle]="dropdownStyle()"
    (mouseenter)="keepOpen()"
    (mouseleave)="closeDropdown()"
  >
    <a routerLink="/guide" class="dropdown-item">Overview</a>
    <a routerLink="/guide/getting-started" class="dropdown-item">Getting Started</a>
    <a routerLink="/ships" class="dropdown-item">Ships Guide</a>
    <a routerLink="/stations" class="dropdown-item">Stations Guide</a>
    <a routerLink="/lore" class="dropdown-item">Lore & Story</a>
  </div>
}

@if (activeDropdown() === 'fleet') {
  <div
    class="dropdown-menu"
    [ngStyle]="dropdownStyle()"
    (mouseenter)="keepOpen()"
    (mouseleave)="closeDropdown()"
  >
    <a routerLink="/ships" class="dropdown-item">Ships</a>
    <a routerLink="/stations" class="dropdown-item">Stations</a>
  </div>
}

@if (activeDropdown() === 'codex') {
  <div
    class="dropdown-menu"
    [ngStyle]="dropdownStyle()"
    (mouseenter)="keepOpen()"
    (mouseleave)="closeDropdown()"
  >
    <a routerLink="/codex" class="dropdown-item">Codex</a>
    <a routerLink="/logistics" class="dropdown-item">Logistics</a>
    <a routerLink="/engineering" class="dropdown-item">Engineering</a>
  </div>
}

@if (activeDropdown() === 'community') {
  <div
    class="dropdown-menu"
    [ngStyle]="dropdownStyle()"
    (mouseenter)="keepOpen()"
    (mouseleave)="closeDropdown()"
  >
    <a routerLink="/media" class="dropdown-item">Media</a>
    <a routerLink="/updates" class="dropdown-item">Updates</a>
    <a routerLink="/contact" class="dropdown-item">Contact</a>
    <a routerLink="/star-map" class="dropdown-item">Star Map</a>
    <a routerLink="/star-map-v2" class="dropdown-item">Star Map v2</a>
  </div>
}
