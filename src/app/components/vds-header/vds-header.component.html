<!-- File: src/app/components/vds-header/vds-header.component.html -->
<ion-header [class.hero-variant]="variant === 'hero'">
  <ion-toolbar>
    <!-- Mobile: hamburger -->
    <ion-buttons slot="start" class="mobile-only">
      <ion-menu-button autoHide="false"></ion-menu-button>
    </ion-buttons>

    <ion-title class="brand">
      <a routerLink="/home-v2" class="brand-link">
        <span class="mono">BEYOND</span> HORIZON
      </a>
    </ion-title>

    <!-- Desktop: nav buttons only -->
    <ion-buttons slot="end" class="desktop-only nav">
      <ion-button routerLink="/">Home</ion-button>
      <ion-button class="dropdown-trigger" (mouseenter)="openFleetDropdown()" (mouseleave)="closeFleetDropdown()">
        Fleet <span class="arrow">▼</span>
      </ion-button>
      <ion-button class="dropdown-trigger" (mouseenter)="openCodexDropdown()" (mouseleave)="closeCodexDropdown()">
        Codex <span class="arrow">▼</span>
      </ion-button>
      <ion-button class="dropdown-trigger" (mouseenter)="openCommunityDropdown()" (mouseleave)="closeCommunityDropdown()">
        Community <span class="arrow">▼</span>
      </ion-button>
      @if (authService.isLoggedIn()) {
        <ion-button class="profile-button" (mouseenter)="openProfileDropdown()" (mouseleave)="closeProfileDropdown()">
          <div class="avatar">{{ authService.currentUser()?.username.charAt(0).toUpperCase() }}</div>
        </ion-button>
      } @else {
        <ion-button routerLink="/login" class="login-button">Login</ion-button>
      }
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- Dropdowns OUTSIDE header completely -->
<div class="dropdown-wrapper dropdown-fleet" (mouseenter)="openFleetDropdown()" (mouseleave)="closeFleetDropdown()">
  <div class="dropdown" [style.display]="fleetOpen() ? 'block' : 'none'">
    <a routerLink="/ships" class="dropdown-item" (click)="closeFleetDropdown()">Ships</a>
    <a routerLink="/stations" class="dropdown-item" (click)="closeFleetDropdown()">Stations</a>
  </div>
</div>

<div class="dropdown-wrapper dropdown-codex" (mouseenter)="openCodexDropdown()" (mouseleave)="closeCodexDropdown()">
  <div class="dropdown" [style.display]="codexOpen() ? 'block' : 'none'">
    <a routerLink="/codex" class="dropdown-item" (click)="closeCodexDropdown()">Codex</a>
    <a routerLink="/logistics" class="dropdown-item" (click)="closeCodexDropdown()">Logistics</a>
    <a routerLink="/engineering" class="dropdown-item" (click)="closeCodexDropdown()">Engineering</a>
  </div>
</div>

<div class="dropdown-wrapper dropdown-community" (mouseenter)="openCommunityDropdown()" (mouseleave)="closeCommunityDropdown()">
  <div class="dropdown" [style.display]="communityOpen() ? 'block' : 'none'">
    <a routerLink="/media" class="dropdown-item" (click)="closeCommunityDropdown()">Media</a>
    <a routerLink="/updates" class="dropdown-item" (click)="closeCommunityDropdown()">Updates</a>
    <a routerLink="/contact" class="dropdown-item" (click)="closeCommunityDropdown()">Contact</a>
    <a routerLink="/star-map" class="dropdown-item" (click)="closeCommunityDropdown()">Star Map</a>
    <a routerLink="/star-map-v2" class="dropdown-item" (click)="closeCommunityDropdown()">Star Map v2</a>
  </div>
</div>

<div class="dropdown-wrapper dropdown-profile" (mouseenter)="openProfileDropdown()" (mouseleave)="closeProfileDropdown()">
  <div class="dropdown" [style.display]="profileOpen() ? 'block' : 'none'">
    <button class="dropdown-item logout-item" (click)="logout()">
      <ion-icon icon="logOut"></ion-icon>
      Logout
    </button>
  </div>
</div>
