<!-- File: src/app/features/codex/codex-detail.page.html -->
@if (entity(); as e) {
  <ion-content>
    <section class="vds-section">
      <!-- Only show model viewer for ships (for now) -->
      @if (isShip()) {
        <bh-model-viewer></bh-model-viewer>
      }
      <div class="head">
        <vds-badge [series]="e.series">{{ e.code }}</vds-badge>
        <h1 class="vds-h1">{{ e.name }}</h1>
        @if (e.class) {
          <span class="vds-chip vds-code">
            {{ e.class }}
          </span>
        }
        @if (!e.class && unitTypeLabel()) {
          <span class="vds-chip vds-code">
            {{ unitTypeLabel() }}
          </span>
        }
        <a routerLink="/codex" class="back">Back to Codex</a>
      </div>
      <div class="layout">
        <article class="vds-card prose">
          <h2 class="vds-h2">{{ e.role }}</h2>
          <p>{{ e.summary }}</p>
          <p>{{ e.description }}</p>
          @if (e.tags?.length) {
            <div class="tags">
              @for (t of e.tags; track t) {
                <span class="tag">{{ t }}</span>
              }
            </div>
          }
        </article>
        <aside class="right">
          <vds-spec-grid [specs]="specs()"></vds-spec-grid>
          <div class="cta vds-card">
            <a routerLink="/media" class="btn">Download Media</a>
          </div>
        </aside>
      </div>
    </section>
  </ion-content>
}
