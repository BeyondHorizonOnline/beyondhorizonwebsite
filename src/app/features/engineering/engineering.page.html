<!-- File: src/app/features/engineering/engineering.page.html -->
<ion-content>
  <!-- Hero Section -->
  <section class="hero">
    <app-starfield-background></app-starfield-background>
    <div class="hero-inner">
      <h1 class="hero-title">Engineering & Extraction</h1>
      <p class="hero-subtitle">Industrial complexes and resource facilities</p>
    </div>
  </section>

  <!-- Content Section -->
  <section class="section">
    <div class="section-container">
      <h2 class="section-title">Browse Facilities</h2>

      <div class="filters">
        <ion-select label="Type" interface="popover" (ionChange)="engineeringFilter.set($event.detail.value||'')">
          <ion-select-option value="">All Types</ion-select-option>
          @for (t of types; track t) {
            <ion-select-option [value]="t">{{t}}</ion-select-option>
          }
        </ion-select>

        @if (engineeringFilter() !== null && engineeringFilter() !== '') {
          <button class="reset-filter" (click)="engineeringFilter.set('')" type="button">
            Reset
          </button>
        }
      </div>

      <div class="grid">
        @for (f of list(); track f) {
          <vds-card
            [title]="f.name"
            [code]="f.code"
            [series]="f.series"
            [summary]="f.summary"
            [tags]="tagsOf(f)"
            [to]="'/codex/'+f.id">
          </vds-card>
        }
      </div>

      @if (list().length === 0) {
        <div class="empty-state">
          <p>No facilities found matching your filter.</p>
          <button class="btn btn-secondary" (click)="engineeringFilter.set('')" type="button">
            Clear Filters
          </button>
        </div>
      }
    </div>
  </section>
</ion-content>